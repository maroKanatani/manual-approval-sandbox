name: Do Something
on:
  workflow_dispatch:
  release:
    types:
      - published

concurrency:
  group: ${{ github.workflow }}
  cancel-in-progress: true

permissions:
  issues: write

jobs:
  deploy:
    runs-on: ubuntu-latest
    timeout-minutes: 10
  
    steps:
      - name: 'Set Issue Title & Body'
        if: github.event_name == 'release'
        run: |
          echo 'ISSUE_TITLE=Release version N' >> $GITHUB_ENV
          echo 'ISSUE_BODY=# aaaaaaaaaaaaaaaaaaaaaaa' >> $GITHUB_ENV
      - name: 'Set Issue Title & Body'
        if: github.event_name == 'workflow_dispatch'
        run: |
          echo 'ISSUE_TITLE=Manual Deploy' >> $GITHUB_ENV
          echo 'ISSUE_BODY=$ Manual' >> $GITHUB_ENV
      - uses: trstringer/manual-approval@v1
        timeout-minutes: 10
        with:
          secret: ${{ secrets.GITHUB_TOKEN }}
          approvers: maroKanatani
          minimum-approvals: 1
          issue-title: '${{ env.ISSUE_TITLE }}'
          issue-body: '${{ env.ISSUE_BODY }}'
      - name: do something
        run: echo "Hello"
